<!DOCTYPE html>
<html>
  <head>
    <style>
      #map {
        height: 400px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <form id="searchForm">
        <input type="text" name="s" placeholder="Search flights...">
        <input type="submit" value="Search">
    </form>

    <!-- the result of the search will be rendered inside this div -->
    <div id="result"></div>


    <script>
      function initMap() {
        var uluru = {lat: -25.363, lng: 131.044};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 4,
          center: uluru
        });
        var marker = new google.maps.Marker({
          position: uluru,
          map: map
        });
      }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBf_sxIn1lzHh9N4IkjVZK5_rIqkgak7mw&callback=initMap">
    </script>
        <script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
        <script>
            var flightData = {
            "request": {
                "slice": [
                {
                    "origin": "SFO",
                    "destination": "LAX",
                    "date": "2017-06-25"
                }
                ],
                "passengers": {
                "adultCount": 1,
                "infantInLapCount": 0,
                "infantInSeatCount": 0,
                "childCount": 0,
                "seniorCount": 0
                },
                "solutions": 20,
                "refundable": false
            }
            };

            var apikey = "AIzaSyBf_sxIn1lzHh9N4IkjVZK5_rIqkgak7mw";
            var endPoint = "https://www.googleapis.com/qpxExpress/v1/trips/search?key="+apikey;

            // $.ajax({
            //     type: "POST",
            //     //Set up your request URL and API Key.
            //     url: "https://www.googleapis.com/qpxExpress/v1/trips/search?key=AIzaSyBf_sxIn1lzHh9N4IkjVZK5_rIqkgak7mw",
            //     // Set Content-type: application/json
            //     contentType: 'application/json',
            //     dataType: 'json',
            //     // The query we want from Google QPX, This will be the variable we created in the beginnin
            //     data: JSON.stringify(flightData),
            //     success: function(data) {
            //         //Once we get the result you can either send it to console or use it anywhere you like.
            //         console.log(JSON.stringify("Google flights respons is: " + data));
            //     },
            //     error: function() {
            //          //Error Handling for our request
            //         console.log("Access to Google QPX Failed.");
            //     }
            // });
            

            // Attach a submit handler to the form
            $( "#searchForm" ).submit(function( event ) {
                // Stop form from submitting normally
                event.preventDefault();

                // Get some values from elements on the page:
                //var url: "https://www.googleapis.com/qpxExpress/v1/trips/search?key=AIzaSyBf_sxIn1lzHh9N4IkjVZK5_rIqkgak7mw";
                

                // Send the data using post
                //var posting = $.post( url, flightData );

                // Put the results in a div
                // posting.done(function( data ) {
                //     var content = $( data ).find( "#content" );
                //     $( "#result" ).empty().append( content );
                // });
                // $.post(endPoint,flightData,
                //     function(data,status){
                //         console.log("Data: " + data + "\nStatus: " + status);
                // });

                $.ajax({
                    type: "POST",
                    //Set up your request URL and API Key.
                    url: "https://www.googleapis.com/qpxExpress/v1/trips/search?key=AIzaSyBf_sxIn1lzHh9N4IkjVZK5_rIqkgak7mw",
                    // Set Content-type: application/json
                    contentType: 'application/json',
                    dataType: 'json',
                    // The query we want from Google QPX, This will be the variable we created in the beginnin
                    data: JSON.stringify(flightData),
                    success: function(data) {
                        //Once we get the result you can either send it to console or use it anywhere you like.
                        console.log(JSON.stringify("Google flights respons is: ", JSON.stringify(data)));
                        var content = $( data ).find( "#content" );
                        $( "#result" ).empty().append( JSON.stringify(data, null, 2));
                    },
                    error: function() {
                        //Error Handling for our request
                        console.log("Access to Google QPX Failed.");
                    }
                });
            });
        </script>
  </body>
</html>